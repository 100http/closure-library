<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>IframeIo</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_net.html">goog.net</a></div><div class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l170">View Source</a></div><h1>class IframeIo</h1><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_events_EventTarget.html">goog.events.EventTarget</a>
      &#x2514; goog.net.IframeIo</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_events_Listenable.html">goog.events.Listenable</a></code></dl><p>Class for managing requests via iFrames.</p><h2>Instance Methods</h2><div id="abort" class="function"><div><h3>abort(<wbr>opt_failureCode)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l626">code »</a></span></h3><p>Abort the current Iframe request</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_failureCode<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>Optional error code to use -  defaults to ABORT.</p></dl></div></div></div></div><hr class="fn-sep"><div id="disposeInternal" class="function"><div><h3>disposeInternal()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l645">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_events_EventTarget.html#disposeInternal">goog.events.EventTarget</a></p></div></div><hr class="fn-sep"><div id="getErrorChecker" class="function"><div><h3>getErrorChecker()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l796">code »</a></span></h3><p>Gets the callback function used to check if a loaded IFrame is in an error state.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>Function</code><dd><p>A callback that expects a document object as it&#39;s single  argument.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastCustomError" class="function"><div><h3>getLastCustomError()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l774">code »</a></span></h3><p>Gets the last custom error.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>Last custom error.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastError" class="function"><div><h3>getLastError()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l765">code »</a></span></h3><p>Gets the last error message.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Last error message.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastErrorCode" class="function"><div><h3>getLastErrorCode()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l756">code »</a></span></h3><p>Gets the last error code.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Last error code.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastUri" class="function"><div><h3>getLastUri()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l747">code »</a></span></h3><p>Get the uri of the last request.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_Uri.html">goog.Uri</a></code><dd><p>Uri of last request.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getRequestIframe" class="function"><div><h3>getRequestIframe()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l1348">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>HTMLIFrameElement</code><dd><p>The appropriate iframe to use for requests  (created in sendForm_).</p></dl></div></div></div></div><hr class="fn-sep"><div id="getResponseHtml" class="function"><div><h3>getResponseHtml()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l714">code »</a></span></h3><p>Returns the last response html (i.e. the innerHtml of the iframe).</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Result from the server.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getResponseJson" class="function"><div><h3>getResponseJson()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l726">code »</a></span></h3><p>Parses the content as JSON. This is a safe parse and may throw an error if the response is malformed. Use goog.json.unsafeparse(this.getResponseText()) if you are sure of the state of the returned content.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>The parsed content.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getResponseText" class="function"><div><h3>getResponseText()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l705">code »</a></span></h3><p>Returns the last response text (i.e. the text content of the iframe). Assumes plain text!</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Result from the server.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getResponseXml" class="function"><div><h3>getResponseXml()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l736">code »</a></span></h3><p>Returns the document object from the last request. Not truely XML, but used to mirror the XhrIo interface.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>HTMLDocument</code><dd><p>The document object from the last request.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isActive" class="function"><div><h3>isActive()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l695">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if a transfer is in progress.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isComplete" class="function"><div><h3>isComplete()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l679">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if transfer is complete.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isIgnoringResponse" class="function"><div><h3>isIgnoringResponse()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l804">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the server response is being ignored.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isSuccess" class="function"><div><h3>isSuccess()<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l687">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if transfer was successful.</p></dl></div></div></div></div><hr class="fn-sep"><div id="send" class="function"><div><h3>send(<wbr>uri, opt_method, opt_noCache, opt_data)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l537">code »</a></span></h3><p>Sends a request via an iframe.</p><p>A HTML form is used and submitted to the iframe, this simplifies the difference between GET and POST requests. The iframe needs to be created and destroyed for each request otherwise the request will contribute to the history stack.</p><p>sendFromForm does some clever trickery (thanks jlim) in non-IE browsers to stop a history entry being added for POST requests.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>uri<code>?(<a href="class_goog_Uri.html">goog.Uri</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>Uri of the request.</p><dt>opt_method<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Default is GET, POST uses a form to submit the  request.</p><dt>opt_noCache<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Append a timestamp to the request to avoid  caching.</p><dt>opt_data<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>=</code><dd><p>Map of key-value pairs.</p></dl></div></div></div></div><hr class="fn-sep"><div id="sendFromForm" class="function"><div><h3>sendFromForm(<wbr>form, opt_uri, opt_noCache)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l601">code »</a></span></h3><p>Sends the data stored in an existing form to the server. The HTTP method should be specified on the form, the action can also be specified but can be overridden by the optional URI param.</p><p>This can be used in conjunction will a file-upload input to upload a file in the background without affecting history.</p><p>Example form: </p><pre>  &lt;form action&#61;&#34;/server/&#34; enctype&#61;&#34;multipart/form-data&#34; method&#61;&#34;POST&#34;&gt;  &lt;input name&#61;&#34;userfile&#34; type&#61;&#34;file&#34;&gt;  &lt;/form&gt; </pre><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>form<code>HTMLFormElement</code><dd><p>Form element used to send the request to the  server.</p><dt>opt_uri<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Uri to set for the destination of the request, by  default the uri will come from the form.</p><dt>opt_noCache<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Append a timestamp to the request to avoid  caching.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setErrorChecker" class="function"><div><h3>setErrorChecker(<wbr>fn)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l785">code »</a></span></h3><p>Sets the callback function used to check if a loaded IFrame is in an error state.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fn<code>Function</code><dd><p>Callback that expects a document object as it&#39;s single  argument.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setIgnoreResponse" class="function"><div><h3>setIgnoreResponse(<wbr>ignore)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l818">code »</a></span></h3><p>Sets whether to ignore the response from the server by not adding any event handlers to fire when the iframe loads. This is necessary when using IframeIo to submit to a server on another domain, to avoid same-origin violations when trying to access the response. If this is set to true, the IframeIo instance will be a single-use instance that is only usable for one request. It will only clean up its resources (iframes and forms) when it is disposed.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>ignore<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to ignore the server response.</p></dl></div></div></div></div><h2>Static Functions</h2><div id="IframeIo.getIframeByName" class="function"><div><h3>IframeIo.getIframeByName(<wbr>fname)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l277">code »</a></span></h3><p>Find an iframe by name (assumes the context is goog.global since that is where IframeIo&#39;s iframes are kept).</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fname<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The name to find.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>HTMLIFrameElement</code><dd><p>The iframe element with that name.</p></dl></div></div></div></div><hr class="fn-sep"><div id="IframeIo.getInstanceByName" class="function"><div><h3>IframeIo.getInstanceByName(<wbr>fname)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l287">code »</a></span></h3><p>Find an instance of the IframeIo object by name.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fname<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The name to find.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_net_IframeIo.html">goog.net.IframeIo</a></code><dd><p>The instance of IframeIo.</p></dl></div></div></div></div><hr class="fn-sep"><div id="IframeIo.handleIncrementalData" class="function"><div><h3>IframeIo.handleIncrementalData(<wbr>win, data)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l299">code »</a></span></h3><p>Handles incremental data and routes it to the correct iframeIo instance. The HTML page requested by the IframeIo instance should contain script blocks that call an externed reference to this method.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>win<code>Window</code><dd><p>The window object.</p><dt>data<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>The data object.</p></dl></div></div></div></div><hr class="fn-sep"><div id="IframeIo.send" class="function"><div><h3>IframeIo.send(<wbr>uri, opt_callback, opt_method, opt_noCache, opt_data)<span class="codelink"><a href="source/closure/goog/net/iframeio.js.src.html#l259">code »</a></span></h3><p>Static send that creates a short lived instance of IframeIo to send the request.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>uri<code>?(<a href="class_goog_Uri.html">goog.Uri</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>Uri of the request, it is up the caller to  manage query string params.</p><dt>opt_callback<code>?Function=</code><dd><p>Event handler for when request is completed.</p><dt>opt_method<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Default is GET, POST uses a form to submit the  request.</p><dt>opt_noCache<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Append a timestamp to the request to avoid  caching.</p><dt>opt_data<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>=</code><dd><p>Map of key-value pairs that  will be posted to the server via the iframe&#39;s form.</p></dl></div></div></div></div><h2>Static Properties</h2><div id="IframeIo.FRAME_NAME_PREFIX" class="property"><dl><dt><a href="source/closure/goog/net/iframeio.js.src.html#l210">IframeIo.FRAME_NAME_PREFIX</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Prefix for frame names</p></dl></div><div id="IframeIo.IFRAME_DISPOSE_DELAY_MS" class="property"><dl><dt><a href="source/closure/goog/net/iframeio.js.src.html#l227">IframeIo.IFRAME_DISPOSE_DELAY_MS</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The number of milliseconds after a request is completed to dispose the iframes. This can be done lazily so we wait long enough for any processing that occurred as a result of the response to finish.</p></dl></div><div id="IframeIo.INNER_FRAME_SUFFIX" class="property"><dl><dt><a href="source/closure/goog/net/iframeio.js.src.html#l218">IframeIo.INNER_FRAME_SUFFIX</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Suffix that is added to inner frames used for sending requests in non-IE browsers</p></dl></div><h2>Types</h2><dl><dt><a href="class_goog_net_IframeIo_IncrementalDataEvent.html">IframeIo.IncrementalDataEvent</a><dd><p>Class for representing incremental data events.</p></dl></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>