<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>ChannelRequest</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_labs_net_webChannel.html">goog.labs.net.webChannel</a></div><div class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l58">View Source</a></div><h1>class ChannelRequest</h1><div class="tags"><span>final</span><span>struct</span></div><p>A new ChannelRequest is created for each request to the server.</p><h2 class="main">new ChannelRequest(<wbr>channel, channelDebug, opt_sessionId, opt_requestId, opt_retryId)</h2><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>channel<code><a href="interface_goog_labs_net_webChannel_Channel.html">goog.labs.net.webChannel.Channel</a></code><dd><p>The channel that owns this request.</p><dt>channelDebug<code><a href="class_goog_labs_net_webChannel_WebChannelDebug.html">goog.labs.net.webChannel.WebChannelDebug</a></code><dd><p>A  WebChannelDebug to use for logging.</p><dt>opt_sessionId<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>The session id for the channel.</p><dt>opt_requestId<code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)=</code><dd><p>The request id for this request.</p><dt>opt_retryId<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>The retry id for this request.</p></dl></div></div><h2>Instance Methods</h2><div id="cancel" class="function"><div><h3>cancel()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l830">code »</a></span></h3><p>Cancels the request no matter what the underlying transport is.</p></div></div><hr class="fn-sep"><div id="getLastError" class="function"><div><h3>getLastError()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l984">code »</a></span></h3><p>If the request was not successful, returns the reason.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The last error.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLastStatusCode" class="function"><div><h3>getLastStatusCode()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l993">code »</a></span></h3><p>Returns the status code of the last request.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The status code of the last request.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getPostData" class="function"><div><h3>getPostData()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1024">code »</a></span></h3><p>Returns the data for a post, if this request is a post.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The POST data provided by the request initiator.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getRequestId" class="function"><div><h3>getRequestId()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1014">code »</a></span></h3><p>Returns the request id for this request. Each request has a unique request id and the request IDs are a sequential increasing count.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined">undefined</a>)</code><dd><p>The request ID.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getRequestStartTime" class="function"><div><h3>getRequestStartTime()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1044">code »</a></span></h3><p>Returns the time that the request started, if it has started.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The time the request started, as returned by goog.now().</p></dl></div></div></div></div><hr class="fn-sep"><div id="getSessionId" class="function"><div><h3>getSessionId()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1003">code »</a></span></h3><p>Returns the session id for this channel.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Undefined">undefined</a>)</code><dd><p>The session ID.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getSuccess" class="function"><div><h3>getSuccess()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l974">code »</a></span></h3><p>Indicates whether the request was successful. Only valid after the handler is called to indicate completion of the request.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if the request succeeded.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getXhr" class="function"><div><h3>getXhr()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1034">code »</a></span></h3><p>Returns the XhrIo request object.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_net_XhrIo.html">goog.net.XhrIo</a></code><dd><p>Any XhrIo request created for this object.</p></dl></div></div></div></div><hr class="fn-sep"><div id="sendUsingImgTag" class="function"><div><h3>sendUsingImgTag(<wbr>uri)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l807">code »</a></span></h3><p>Uses an IMG tag to send an HTTP get to the server. This is only currently used to terminate the connection, as an IMG tag is the most reliable way to send something to the server while the page is getting torn down.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>uri<code><a href="class_goog_Uri.html">goog.Uri</a></code><dd><p>The uri to send a request to.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setExtraHeaders" class="function"><div><h3>setExtraHeaders(<wbr>extraHeaders)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l378">code »</a></span></h3><p>Sets extra HTTP headers to add to all the requests sent to the server.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>extraHeaders<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>The HTTP headers.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setReadyStateChangeThrottle" class="function"><div><h3>setReadyStateChangeThrottle(<wbr>throttle)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l399">code »</a></span></h3><p>Sets the throttle for handling onreadystatechange events for the request.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>throttle<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The throttle in ms. A value of zero indicates  no throttle.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setTimeout" class="function"><div><h3>setTimeout(<wbr>timeout)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l388">code »</a></span></h3><p>Sets the timeout for a request</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>timeout<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The timeout in MS for when we fail the request.</p></dl></div></div></div></div><hr class="fn-sep"><div id="xmlHttpGet" class="function"><div><h3>xmlHttpGet(<wbr>uri, decodeChunks, hostPrefix, opt_noClose, opt_duplicateRandom)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l436">code »</a></span></h3><p>Uses XMLHTTP to send an HTTP GET to the server.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>uri<code><a href="class_goog_Uri.html">goog.Uri</a></code><dd><p>The uri of the request.</p><dt>decodeChunks<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to the result is expected to be  encoded for chunking and thus requires decoding.</p><dt>hostPrefix<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The host prefix, if we might be using a  secondary domain. Note that it should also be in the URL, adding this  won&#39;t cause it to be added to the URL.</p><dt>opt_noClose<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Whether to request that the tcp/ip connection  should be closed.</p><dt>opt_duplicateRandom<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Whether to duplicate the randomness  parameter which is only required for the initial handshake. This allows  a server to break compatibility with old version clients.</p></dl></div></div></div></div><hr class="fn-sep"><div id="xmlHttpPost" class="function"><div><h3>xmlHttpPost(<wbr>uri, postData, decodeChunks)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l412">code »</a></span></h3><p>Uses XMLHTTP to send an HTTP POST to the server.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>uri<code><a href="class_goog_Uri.html">goog.Uri</a></code><dd><p>The uri of the request.</p><dt>postData<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The data for the post body.</p><dt>decodeChunks<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to the result is expected to be  encoded for chunking and thus requires decoding.</p></dl></div></div></div></div><h2>Static Functions</h2><div id="ChannelRequest.createChannelRequest" class="function"><div><h3>ChannelRequest.createChannelRequest(<wbr>channel, channelDebug, opt_sessionId, opt_requestId, opt_retryId)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l1079">code »</a></span></h3><p>Convenience factory method.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>channel<code><a href="interface_goog_labs_net_webChannel_Channel.html">goog.labs.net.webChannel.Channel</a></code><dd><p>The channel object that owns this request.</p><dt>channelDebug<code><a href="class_goog_labs_net_webChannel_WebChannelDebug.html">goog.labs.net.webChannel.WebChannelDebug</a></code><dd><p>A WebChannelDebug to use for logging.</p><dt>opt_sessionId<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>The session id for the channel.</p><dt>opt_requestId<code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)=</code><dd><p>The request id for this request.</p><dt>opt_retryId<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>=</code><dd><p>The retry id for this request.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_labs_net_webChannel_ChannelRequest.html">goog.labs.net.webChannel.ChannelRequest</a></code><dd><p>The created channel request.</p></dl></div></div></div></div><hr class="fn-sep"><div id="ChannelRequest.errorStringFromCode" class="function"><div><h3>ChannelRequest.errorStringFromCode(<wbr>errorCode, statusCode)<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l333">code »</a></span></h3><p>Returns a useful error string for debugging based on the specified error code.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>errorCode<code>?<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The error code.</p><dt>statusCode<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>The HTTP status code.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The error string for the given code combination.</p></dl></div></div></div></div><hr class="fn-sep"><div id="ChannelRequest.supportsXhrStreaming" class="function"><div><h3>ChannelRequest.supportsXhrStreaming()<span class="codelink"><a href="source/closure/goog/labs/net/webchannel/channelrequest.js.src.html#l368">code »</a></span></h3><p>Returns whether XHR streaming is supported on this browser.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether XHR streaming is supported.</p></dl></div></div></div></div><h2>Types</h2><dl><dt><a href="enum_goog_labs_net_webChannel_ChannelRequest_Error.html">ChannelRequest.Error</a><dd><p>Enum type for identifying an error.</p><dt><a href="enum_goog_labs_net_webChannel_ChannelRequest_Type_.html">ChannelRequest.Type_</a><dd><p>Enum for channel requests type</p></dl></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>