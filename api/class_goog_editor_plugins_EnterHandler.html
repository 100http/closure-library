<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>EnterHandler</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_editor_plugins.html">goog.editor.plugins</a></div><div class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l53">View Source</a></div><h1>class EnterHandler</h1><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_events_EventTarget.html">goog.events.EventTarget</a>
      &#x2514; <a href="class_goog_editor_Plugin.html">goog.editor.Plugin</a>
          &#x2514; goog.editor.plugins.EnterHandler</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_events_Listenable.html">goog.events.Listenable</a></code></dl><p>Plugin to handle enter keys. This does all the crazy to normalize (as much as is reasonable) what happens when you hit enter. This also handles the special casing of hitting enter in a blockquote.</p><p>In IE, Webkit, and Opera, the resulting HTML uses one DIV tag per line. In Firefox, the resulting HTML uses BR tags at the end of each line.</p><h2>Instance Methods</h2><div id="deleteBrGecko" class="function"><div><h3>deleteBrGecko(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l215">code »</a></span></h3><p>Deletes the element at the cursor if it is a BR node, and if it does, calls e.preventDefault to stop the browser from deleting. Only necessary in Gecko as a workaround for mozilla bug 205350 where deleting a BR that is followed by a block element doesn&#39;t work (the BR gets immediately replaced). We also need to account for an ill-formed cursor which occurs from us trying to stop the browser from deleting.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_Event.html">goog.events.Event</a></code><dd><p>The DELETE keypress event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="enable" class="function"><div><h3>enable(<wbr>fieldObject)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l76">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_editor_Plugin.html#enable">goog.editor.Plugin</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fieldObject<code><a href="class_goog_editor_Field.html">goog.editor.Field</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="ensureBlockIeOpera" class="function"><div><h3>ensureBlockIeOpera(<wbr>tag, opt_keyUp)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l442">code »</a></span></h3><p>Ensures all text in IE and Opera to be in the given tag in order to control Enter spacing. Call this when Enter is pressed if desired.</p><p>We want to make sure the user is always inside of a block (or other nodes listed in goog.editor.plugins.EnterHandler.IGNORE_ENSURE_BLOCK_NODES_). We listen to keypress to force nodes that the user is leaving to turn into blocks, but we also need to listen to keyup to force nodes that the user is entering to turn into blocks. Example: html is: &#34;</p><h2>foo[cursor]</h2>&#34;, and the user hits enter. We don&#39;t want to format the h2, but we do want to format the P that is created on enter. The P node is not available until keyup.<div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>tag<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The tag name to convert to.</p><dt>opt_keyUp<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Whether the function is being called on key up.  When called on key up, the cursor is in the newly created node, so the  semantics for when to change it to a block are different. Specifically,  if the resulting node contains only a BR, it is converted to .</p></dl></div></div></div></div><hr class="fn-sep"><div id="getNonCollapsingBlankHtml" class="function"><div><h3>getNonCollapsingBlankHtml()<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l112">code »</a></span></h3><p>Gets HTML with no contents that won&#39;t collapse, for browsers that collapse the empty string.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Blank html.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getTrogClassId" class="function"><div><h3>getTrogClassId()<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l70">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_editor_Plugin.html#getTrogClassId">goog.editor.Plugin</a></p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="handleBackspaceInternal" class="function"><div><h3>handleBackspaceInternal(<wbr>e, range)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l122">code »</a></span></h3><p>Internal backspace handler.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_Event.html">goog.events.Event</a></code><dd><p>The keypress event.</p><dt>range<code><a href="class_goog_dom_AbstractRange.html">goog.dom.AbstractRange</a></code><dd><p>The closure range object.</p></dl></div></div></div></div><hr class="fn-sep"><div id="handleDeleteGecko" class="function"><div><h3>handleDeleteGecko(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l199">code »</a></span></h3><p>Internal delete key handler.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_Event.html">goog.events.Event</a></code><dd><p>The keypress event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="handleEnterAtCursorGeckoInternal" class="function"><div><h3>handleEnterAtCursorGeckoInternal(<wbr>e, wasCollapsed, range)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l393">code »</a></span></h3><p>Handle an enter key press on collapsed selection. handleEnterGecko_ ensures the selection is collapsed by deleting its contents if it is not. The default implementation does nothing.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>The key press event.</p><dt>wasCollapsed<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the selection was collapsed before  the key press. If it was not, code before this function has already  cleared the contents of the selection.</p><dt>range<code><a href="class_goog_dom_AbstractRange.html">goog.dom.AbstractRange</a></code><dd><p>Object representing the selection.</p></dl></div></div></div></div><hr class="fn-sep"><div id="handleEnterWebkitInternal" class="function"><div><h3>handleEnterWebkitInternal(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l378">code »</a></span></h3><p>Handle an enter key press in WebKit.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>The key press event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="handleKeyPress" class="function"><div><h3>handleKeyPress(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l268">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_editor_Plugin.html#handleKeyPress">goog.editor.Plugin</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="handleKeyUp" class="function"><div><h3>handleKeyUp(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l322">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_editor_Plugin.html#handleKeyUp">goog.editor.Plugin</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="handleKeyUpInternal" class="function"><div><h3>handleKeyUpInternal(<wbr>e)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l339">code »</a></span></h3><p>Internal handler for keyup events.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_Event.html">goog.events.Event</a></code><dd><p>The key event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="prepareContentsHtml" class="function"><div><h3>prepareContentsHtml(<wbr>html, arg1)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l96">code »</a></span></h3><p>If the contents are empty, return the &#39;default&#39; html for the field. The &#39;default&#39; contents depend on the enter handling mode, so it makes the most sense in this plugin.</p><p><b>Overrides: </b><a href="class_goog_editor_Plugin.html#prepareContentsHtml">goog.editor.Plugin</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>html<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The html to prepare.</p><dt>arg1<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>=</code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The original HTML, or default contents if that  html is empty.</p></dl></div></div></div></div><hr class="fn-sep"><div id="processParagraphTagsInternal" class="function"><div><h3>processParagraphTagsInternal(<wbr>e, split)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l142">code »</a></span></h3><p>Fix paragraphs to be the correct type of node.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>e<code><a href="class_goog_events_Event.html">goog.events.Event</a></code><dd><p>The  key event.</p><dt>split<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether we already split up a blockquote by  manually inserting elements.</p></dl></div></div></div></div><h2>Instance Properties</h2><div id="tag" class="property"><dl><dt><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l66">tag</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The type of block level tag to add on enter, for browsers that support specifying the default block-level tag. Can be overriden by subclasses; must be either DIV or P.</p></dl></div><h2>Static Functions</h2><div id="EnterHandler.isBrElem" class="function"><div><h3>EnterHandler.isBrElem(<wbr>node)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l417">code »</a></span></h3><p>Whether this is a node that contains a single BR tag and non-nbsp whitespace.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>node<code>Node</code><dd><p>Node to check.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether this is an element that only contains a BR.</p></dl></div></div></div></div><hr class="fn-sep"><div id="EnterHandler.isDirectlyInBlockquote" class="function"><div><h3>EnterHandler.isDirectlyInBlockquote(<wbr>n)<span class="codelink"><a href="source/closure/goog/editor/plugins/enterhandler.js.src.html#l183">code »</a></span></h3><p>Determines whether the lowest containing block node is a blockquote.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>n<code>Node</code><dd><p>The node.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the deepest block ancestor of n is a blockquote.</p></dl></div></div></div></div></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>