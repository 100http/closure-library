<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>History</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog.html">goog</a></div><div class="codelink"><a href="source/closure/goog/history/history.js.src.html#l235">View Source</a></div><h1>class History</h1><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_events_EventTarget.html">goog.events.EventTarget</a>
      &#x2514; goog.History</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_events_Listenable.html">goog.events.Listenable</a></code></dl><p>A history management object. Can be instantiated in user-visible mode (uses the address fragment to manage state) or in hidden mode. This object should be created from a script in the document body before the document has finished loading.</p><p>To store the hidden states in browsers other than IE, a hidden iframe is used. It must point to a valid html page on the same domain (which can and probably should be blank.)</p><p>Sample instantiation and usage:</p>
<pre>
// Instantiate history to use the address bar for state.
var h &#61; new goog.History();
goog.events.listen(h, goog.history.EventType.NAVIGATE, navCallback);
h.setEnabled(true);

// Any changes to the location hash will call the following function.
function navCallback(e) {
  alert(&#39;Navigated to state &#34;&#39; &#43; e.token &#43; &#39;&#34;&#39;);
}

// The history token can also be set from code directly.
h.setToken(&#39;foo&#39;);
</pre><h2 class="main">new History(<wbr>opt_invisible, opt_blankPageUrl, opt_input, opt_iframe)</h2><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_invisible<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>True to use hidden history states instead of  the user-visible location hash.</p><dt>opt_blankPageUrl<code>(<a href="class_goog_html_TrustedResourceUrl.html">goog.html.TrustedResourceUrl</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)=</code><dd><p>A URL to a  blank page on the same server. Required if opt_invisible is true. If  possible pass a TrustedResourceUrl; string is supported for  backwards-compatibility only and uses goog.html.legacyconversions.  This URL is also used as the src for the iframe used to track history  state in IE (if not specified the iframe is not given a src attribute).  Access is Denied error may occur in IE7 if the window&#39;s URL&#39;s scheme  is https, and this URL is not specified.</p><dt>opt_input<code>?HTMLInputElement=</code><dd><p>The hidden input element to be used to  store the history token. If not provided, a hidden input element will  be created using document.write.</p><dt>opt_iframe<code>?HTMLIFrameElement=</code><dd><p>The hidden iframe that will be used by  IE for pushing history state changes, or by all browsers if opt_invisible  is true. If not provided, a hidden iframe element will be created using  document.write.</p></dl></div></div><h2>Instance Methods</h2><div id="disposeInternal" class="function"><div><h3>disposeInternal()<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l465">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_events_EventTarget.html#disposeInternal">goog.events.EventTarget</a></p></div></div><hr class="fn-sep"><div id="getToken" class="function"><div><h3>getToken()<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l606">code »</a></span></h3><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The current token.</p></dl></div></div></div></div><hr class="fn-sep"><div id="onDocumentLoaded" class="function"><div><h3>onDocumentLoaded()<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l556">code »</a></span></h3><p>Callback for the window onload event in IE. This is necessary to read the value of the hidden input after restoring a history session. The value of input elements is not viewable until after window onload for some reason (the iframe state is similarly unavailable during the loading phase.) If setEnabled is called before the iframe has completed loading, the history object will actually be enabled at this point.</p></div></div><hr class="fn-sep"><div id="replaceToken" class="function"><div><h3>replaceToken(<wbr>token, opt_title)<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l639">code »</a></span></h3><p>Replaces the current history state without affecting the rest of the history stack.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>token<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The history state identifier.</p><dt>opt_title<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Optional title used when setting the hidden iframe  title in IE.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setEnabled" class="function"><div><h3>setEnabled(<wbr>enable)<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l484">code »</a></span></h3><p>Starts or stops the History polling loop. When enabled, the History object will immediately fire an event for the current location. The caller can set up event listeners between the call to the constructor and the call to setEnabled.</p><p>On IE, actual startup may be delayed until the iframe and hidden input element have been loaded and can be polled. This behavior is transparent to the caller.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>enable<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether to enable the history polling loop.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setToken" class="function"><div><h3>setToken(<wbr>token, opt_title)<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l627">code »</a></span></h3><p>Sets the history state. When user visible states are used, the URL fragment will be set to the provided token. Sometimes it is necessary to set the history token before the document title has changed, in this case IE&#39;s history drop down can be out of sync with the token. To get around this problem, the app can pass in a title to use with the hidden iframe.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>token<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The history state identifier.</p><dt>opt_title<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Optional title used when setting the hidden iframe  title in IE.</p></dl></div></div></div></div><h2>Instance Properties</h2><div id="documentLoaded" class="property"><dl><dt><a href="source/closure/goog/history/history.js.src.html#l368">documentLoaded</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>IE-only variable for determining if the document has loaded.</p></dl></div><h2>Static Functions</h2><div id="History.isOnHashChangeSupported" class="function"><div><h3>History.isOnHashChangeSupported()<span class="codelink"><a href="source/closure/goog/history/history.js.src.html#l429">code »</a></span></h3><p>Whether the browser supports HTML5 history management&#39;s onhashchange event. <code>http://www.w3.org/TR/html5/history.html</code>. IE 9 in compatibility mode indicates that onhashchange is in window, but testing reveals the event isn&#39;t actually fired.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether onhashchange is supported.</p></dl></div></div></div></div><h2>Static Properties</h2><div id="History.HASH_ALWAYS_REQUIRED" class="property"><dl><dt><a href="source/closure/goog/history/history.js.src.html#l451">History.HASH_ALWAYS_REQUIRED</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the browser always requires the hash to be present. Internet Explorer before version 8 will reload the HTML page if the hash is omitted.</p></dl></div><div id="History.LEGACY_IE" class="property"><dl><dt><a href="source/closure/goog/history/history.js.src.html#l442">History.LEGACY_IE</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the current browser is Internet Explorer prior to version 8. Many IE specific workarounds developed before version 8 are unnecessary in more current versions.</p></dl></div><h2>Types</h2><dl><dt><a href="class_goog_History_Event.html">History.Event</a><dd><p>Event object dispatched after the history state has changed.</p><dt><a href="enum_goog_History_EventType.html">History.EventType</a><dd><p>Constant for the history change event type.</p><dt><a href="enum_goog_History_PollingType.html">History.PollingType</a><dd><p>Types of polling.</p></dl></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>