<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>DataManager</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_ds.html">goog.ds</a></div><div class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l46">View Source</a></div><h1>class DataManager</h1><div class="tags"><span>final</span></div><pre class="inheritance"><a href="class_goog_ds_DataNode.html">goog.ds.DataNode</a>
  &#x2514; goog.ds.DataManager</pre><p>Create a DataManger</p><h2>Instance Methods</h2><div id="addDataSource" class="function"><div><h3>addDataSource(<wbr>ds, opt_autoload, opt_name)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l93">code »</a></span></h3><p>Add a data source</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>ds<code><a href="class_goog_ds_DataNode.html">goog.ds.DataNode</a></code><dd><p>The data source.</p><dt>opt_autoload<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code><dd><p>Whether to automatically load the data,  defaults to false.</p><dt>opt_name<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Optional name, can also get name  from the datasource.</p></dl></div></div></div></div><hr class="fn-sep"><div id="addIndexedListener" class="function"><div><h3>addIndexedListener(<wbr>fn, dataPath, opt_id)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l349">code »</a></span></h3><p>Adds an indexed listener.</p><p>Indexed listeners allow for &#39;*&#39; in data paths. If a * exists, will match all values and return the matched values in an array to the callback.</p><p>Currently uses a promiscuous match algorithm: Matches everything before the first &#39;*&#39;, and then does a regex match for all of the returned events. Although this isn&#39;t optimized, it is still an improvement as you can collapse 100&#39;s of listeners into a single regex match</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fn<code>Function</code><dd><p>Callback function, signature (dataPath, id, indexes).</p><dt>dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Fully qualified data path.</p><dt>opt_id<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>A value passed back to the listener when the dataPath  is matched.</p></dl></div></div></div></div><hr class="fn-sep"><div id="addListener" class="function"><div><h3>addListener(<wbr>fn, dataPath, opt_id)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l291">code »</a></span></h3><p>Adds a listener Listeners should fire when any data with path that has dataPath as substring is changed. TODO(user) Look into better listener handling</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fn<code>Function</code><dd><p>Callback function, signature function(dataPath, id).</p><dt>dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Fully qualified data path.</p><dt>opt_id<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>A value passed back to the listener when the dataPath  is matched.</p></dl></div></div></div></div><hr class="fn-sep"><div id="aliasDataSource" class="function"><div><h3>aliasDataSource(<wbr>name, dataPath)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l116">code »</a></span></h3><p>Create an alias for a data path, very similar to assigning a variable. For example, you can set $CurrentContact -&gt; $Request/Contacts[5], and all references to $CurrentContact will be procesed on $Request/Contacts[5].</p><p>Aliases will hide datasources of the same name.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>name<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Alias name, must be a top level path ($Foo).</p><dt>dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Data path being aliased.</p></dl></div></div></div></div><hr class="fn-sep"><div id="fireDataChange" class="function"><div><h3>fireDataChange(<wbr>dataPath)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l534">code »</a></span></h3><p>Fire a data change event to all listeners</p><p>If the path matches the path of a listener, the listener will fire</p><p>If your path is the parent of a listener, the listener will fire. I.e. if $Contacts/bob&#64;bob.com changes, then we will fire listener for $Contacts/bob&#64;bob.com/Name as well, as the assumption is that when a parent changes, all children are invalidated.</p><p>If your path is the child of a listener, the listener may fire, depending on the ancestor depth.</p><p>A listener for $Contacts might only be interested if the contact name changes (i.e. $Contacts doesn&#39;t fire on $Contacts/bob&#64;bob.com/Name), while a listener for a specific contact might (i.e. $Contacts/bob&#64;bob.com would fire on $Contacts/bob&#64;bob.com/Name). Adding &#34;/...&#34; to a lisetener path listens to all children, and adding &#34;/*&#34; to a listener path listens only to direct children</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Fully qualified data path.</p></dl></div></div></div></div><hr class="fn-sep"><div id="get" class="function"><div><h3>get(<wbr>arg0)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l175">code »</a></span></h3><p>Get the value of the node</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#get">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>arg0<code>...?</code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd><p>The value of the node.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getChildNode" class="function"><div><h3>getChildNode(<wbr>name, arg1)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l204">code »</a></span></h3><p>Gets a named child node of the current node</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getChildNode">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>name<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The node name.</p><dt>arg1<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>=</code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_ds_DataNode.html">goog.ds.DataNode</a></code><dd><p>The child node,  or null if no node of this name exists.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getChildNodeValue" class="function"><div><h3>getChildNodeValue(<wbr>name)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l210">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getChildNodeValue">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>name<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="getChildNodes" class="function"><div><h3>getChildNodes(<wbr>opt_selector)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l187">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getChildNodes">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_selector<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_ds_DataNodeList.html">goog.ds.DataNodeList</a></code></dl></div></div></div></div><hr class="fn-sep"><div id="getDataName" class="function"><div><h3>getDataName()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l221">code »</a></span></h3><p>Get the name of the node relative to the parent node</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getDataName">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The name of the node.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getDataPath" class="function"><div><h3>getDataPath()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l231">code »</a></span></h3><p>Gets the a qualified data path to this node</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getDataPath">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The data path.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getDataSource" class="function"><div><h3>getDataSource(<wbr>name)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l161">code »</a></span></h3><p>Gets a named child node of the current node.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>name<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The node name.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_ds_DataNode.html">goog.ds.DataNode</a></code><dd><p>The child node,  or null if no node of this name exists.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getEventCount" class="function"><div><h3>getEventCount()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l275">code »</a></span></h3><p>Get the total count of events fired (mostly for debugging)</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Count of events.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getListenerCount" class="function"><div><h3>getListenerCount()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l479">code »</a></span></h3><p>Get the total number of listeners (per expression listened to, so may be more than number of times addListener() has been called</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Number of listeners.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getLoadState" class="function"><div><h3>getLoadState()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l258">code »</a></span></h3><p>Gets the state of the backing data for this node</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#getLoadState">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The state.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isList" class="function"><div><h3>isList()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l266">code »</a></span></h3><p>Whether the value of this node is a homogeneous list of data</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#isList">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if a list.</p></dl></div></div></div></div><hr class="fn-sep"><div id="load" class="function"><div><h3>load()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l241">code »</a></span></h3><p>Load or reload the backing data for this node only loads datasources flagged with autoload</p><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#load">goog.ds.DataNode</a></p></div></div><hr class="fn-sep"><div id="removeIndexedListeners" class="function"><div><h3>removeIndexedListeners(<wbr>fn, opt_dataPath, opt_id)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l402">code »</a></span></h3><p>Removes indexed listeners with a given callback function, and optional matching datapath and matching id.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fn<code>Function</code><dd><p>Callback function, signature function(dataPath, id).</p><dt>opt_dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Fully qualified data path.</p><dt>opt_id<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>A value passed back to the listener when the dataPath  is matched.</p></dl></div></div></div></div><hr class="fn-sep"><div id="removeListeners" class="function"><div><h3>removeListeners(<wbr>fn, opt_dataPath, opt_id)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l418">code »</a></span></h3><p>Removes listeners with a given callback function, and optional matching dataPath and matching id</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>fn<code>Function</code><dd><p>Callback function, signature function(dataPath, id).</p><dt>opt_dataPath<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>Fully qualified data path.</p><dt>opt_id<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>=</code><dd><p>A value passed back to the listener when the dataPath  is matched.</p></dl></div></div></div></div><hr class="fn-sep"><div id="runWithoutFiringDataChanges" class="function"><div><h3>runWithoutFiringDataChanges(<wbr>callback)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l498">code »</a></span></h3><p>Disables the sending of all data events during the execution of the given callback. This provides a way to avoid useless notifications of small changes when you will eventually send a data event manually that encompasses them all.</p><p>Note that this function can not be called reentrantly.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>callback<code>Function</code><dd><p>Zero-arg function to execute.</p></dl></div></div></div></div><hr class="fn-sep"><div id="set" class="function"><div><h3>set(<wbr>value)<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l181">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_ds_DataNode.html#set">goog.ds.DataNode</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>value<code>*</code></dl></div></div></div></div><h2>Instance Properties</h2><div id="aliases_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l51">aliases_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd>No description.</dl></div><div id="autoloads_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l48">autoloads_</a><code><a href="class_goog_structs_Map.html">goog.structs.Map</a></code><dd>No description.</dl></div><div id="dataSources_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l47">dataSources_</a><code><a href="class_goog_ds_BasicNodeList.html">goog.ds.BasicNodeList</a></code><dd>No description.</dl></div><div id="eventCount_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l52">eventCount_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd>No description.</dl></div><div id="indexedListenersByFunction_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l53">indexedListenersByFunction_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd>No description.</dl></div><div id="listenerMap_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l49">listenerMap_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd>No description.</dl></div><div id="listenersByFunction_" class="property"><dl><dt><a href="source/closure/goog/datasource/datamanager.js.src.html#l50">listenersByFunction_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code><dd>No description.</dl></div><h2>Static Functions</h2><div id="DataManager.clearInstance" class="function"><div><h3>DataManager.clearInstance()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l80">code »</a></span></h3><p>Clears the global instance (for unit tests to reset state).</p></div></div><hr class="fn-sep"><div id="DataManager.getInstance" class="function"><div><h3>DataManager.getInstance()<span class="codelink"><a href="source/closure/goog/datasource/datamanager.js.src.html#l69">code »</a></span></h3><p>Get the global instance</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_ds_DataManager.html">goog.ds.DataManager</a></code><dd><p>The data manager singleton.</p></dl></div></div></div></div></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>