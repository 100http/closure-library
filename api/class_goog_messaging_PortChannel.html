<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>PortChannel</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_messaging.html">goog.messaging</a></div><div class="codelink"><a href="source/closure/goog/messaging/portchannel.js.src.html#l63">View Source</a></div><h1>class PortChannel</h1><div class="tags"><span>final</span></div><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_messaging_AbstractChannel.html">goog.messaging.AbstractChannel</a>
      &#x2514; goog.messaging.PortChannel</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_messaging_MessageChannel.html">goog.messaging.MessageChannel</a></code></dl><p>A wrapper for several types of HTML5 message-passing entities (<code>MessagePort</code>s and <code>WebWorker</code>s). This class implements the <a href="interface_goog_messaging_MessageChannel.html"><code>goog.messaging.MessageChannel</code></a> interface.</p><p>This class can be used in conjunction with other communication on the port. It sets <a href="class_goog_messaging_PortChannel.html#PortChannel.FLAG"><code>goog.messaging.PortChannel.FLAG</code></a> to true on all messages it sends.</p><h2 class="main">new PortChannel(<wbr>underlyingPort)</h2><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>underlyingPort<code>(MessagePort|WebWorker)</code><dd><p>The message-passing  entity to wrap. If this is a <code>MessagePort</code>, it should be started.  The remote end should also be wrapped in a PortChannel. This will be  disposed along with the PortChannel; this means terminating it if it&#39;s a  worker or removing it from the DOM if it&#39;s an iframe.</p></dl></div></div><h2>Instance Methods</h2><div id="disposeInternal" class="function"><div><h3>disposeInternal()<span class="codelink"><a href="source/closure/goog/messaging/portchannel.js.src.html#l389">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_messaging_AbstractChannel.html#disposeInternal">goog.messaging.AbstractChannel</a></p></div></div><hr class="fn-sep"><div id="send" class="function"><div><h3>send(<wbr>serviceName, payload)<span class="codelink"><a href="source/closure/goog/messaging/portchannel.js.src.html#l242">code »</a></span></h3><p>Sends a message over the channel.</p><p>As an addition to the basic MessageChannel send API, PortChannels can send objects that contain MessagePorts. Note that only plain Objects and Arrays, not their subclasses, can contain MessagePorts.</p><p>As per <code>http://www.w3.org/TR/html5/comms.html#clone-a-port</code>, once a port is copied to be sent across a channel, the original port will cease being able to send or receive messages.</p><p><b>Overrides: </b><a href="class_goog_messaging_AbstractChannel.html#send">goog.messaging.AbstractChannel</a><br><b>Specified by: </b><a href="interface_goog_messaging_MessageChannel.html#send">goog.messaging.MessageChannel</a></p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>serviceName<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The name of the service this message should be  delivered to.</p><dt>payload<code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code><dd><p>The value of the message. May  contain MessagePorts or be a MessagePort.</p></dl></div></div></div></div><h2>Instance Properties</h2><div id="logger" class="property"><dl><dt><a href="source/closure/goog/messaging/portchannel.js.src.html#l221">logger</a><code><a href="class_goog_debug_Logger.html">goog.debug.Logger</a></code><dd><p>Logger for this class.</p></dl></div><h2>Static Functions</h2><div id="PortChannel.forEmbeddedWindow" class="function"><div><h3>PortChannel.forEmbeddedWindow(<wbr>window, peerOrigin, opt_timer)<span class="codelink"><a href="source/closure/goog/messaging/portchannel.js.src.html#l105">code »</a></span></h3><p>Create a PortChannel that communicates with a window embedded in the current page (e.g. an iframe contentWindow). The code within the window should call <code>forGlobalWindow</code> to establish the connection.</p><p>It&#39;s possible to use this channel in conjunction with other messages to the embedded window. However, only one PortChannel should be used for a given window at a time.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>window<code>Window</code><dd><p>The window object to communicate with.</p><dt>peerOrigin<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The expected origin of the window. See  http://dev.w3.org/html5/postmsg/#dom-window-postmessage.</p><dt>opt_timer<code>?<a href="class_goog_Timer.html">goog.Timer</a>=</code><dd><p>The timer that regulates how often the initial  connection message is attempted. This will be automatically disposed once  the connection is established, or when the connection is cancelled.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_messaging_DeferredChannel.html">goog.messaging.DeferredChannel</a></code><dd><p>The PortChannel. Although this is  not actually an instance of the PortChannel class, it will behave like  one in that MessagePorts may be sent across it. The DeferredChannel may  be cancelled before a connection is established in order to abort the  attempt to make a connection.</p></dl></div></div></div></div><hr class="fn-sep"><div id="PortChannel.forGlobalWindow" class="function"><div><h3>PortChannel.forGlobalWindow(<wbr>peerOrigin)<span class="codelink"><a href="source/closure/goog/messaging/portchannel.js.src.html#l164">code »</a></span></h3><p>Create a PortChannel that communicates with the document in which this window is embedded (e.g. within an iframe). The enclosing document should call <code>forEmbeddedWindow</code> to establish the connection.</p><p>It&#39;s possible to use this channel in conjunction with other messages posted to the global window. However, only one PortChannel should be used for the global window at a time.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>peerOrigin<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The expected origin of the enclosing document. See  http://dev.w3.org/html5/postmsg/#dom-window-postmessage.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="interface_goog_messaging_MessageChannel.html">goog.messaging.MessageChannel</a></code><dd><p>The PortChannel. Although this may  not actually be an instance of the PortChannel class, it will behave like  one in that MessagePorts may be sent across it.</p></dl></div></div></div></div><h2>Static Properties</h2><div id="PortChannel.FLAG" class="property"><dl><dt><a href="source/closure/goog/messaging/portchannel.js.src.html#l198">PortChannel.FLAG</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>The flag added to messages that are sent by a PortChannel, and are meant to be handled by one on the other side.</p></dl></div></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>