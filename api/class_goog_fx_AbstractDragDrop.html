<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>AbstractDragDrop</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_fx.html">goog.fx</a></div><div class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l60">View Source</a></div><h1>class AbstractDragDrop</h1><pre class="inheritance"><a href="class_goog_Disposable.html">goog.Disposable</a>
  &#x2514; <a href="class_goog_events_EventTarget.html">goog.events.EventTarget</a>
      &#x2514; goog.fx.AbstractDragDrop</pre><dl><dt>All implemented interfaces:<dd><code><a href="interface_goog_disposable_IDisposable.html">goog.disposable.IDisposable</a></code>, <code><a href="interface_goog_events_Listenable.html">goog.events.Listenable</a></code></dl><p>Abstract class that provides reusable functionality for implementing drag and drop functionality.</p><p>This class also allows clients to define their own subtargeting function so that drop areas can have finer granularity then a singe element. This is accomplished by using a client provided function to map from element and coordinates to a subregion id.</p><p>This class can also be made aware of scrollable containers that contain drop targets by calling addScrollableContainer. This will cause dnd to take changing scroll positions into account while a drag is occuring.</p><h2>Instance Methods</h2><div id="addItem" class="function"><div><h3>addItem(<wbr>element)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l252">code »</a></span></h3><p>Add item to drag object.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>element<code>?(Element|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>Dom Node, or string representation of node  id, to be used as drag source/drop target.</p></dl></div><div class="fn-details"><div><b>Throws</b></div><dl><dt><dd><p>Thrown if called on instance of abstract class</p></dl></div></div></div></div><hr class="fn-sep"><div id="addScrollableContainer" class="function"><div><h3>addScrollableContainer(<wbr>element)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l707">code »</a></span></h3><p>Makes drag and drop aware of a target container that could scroll mid drag.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>element<code>Element</code><dd><p>The scroll container.</p></dl></div></div></div></div><hr class="fn-sep"><div id="addTarget" class="function"><div><h3>addTarget(<wbr>target)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l260">code »</a></span></h3><p>Associate drop target with drag element.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>target<code><a href="class_goog_fx_AbstractDragDrop.html">goog.fx.AbstractDragDrop</a></code><dd><p>Target to add.</p></dl></div></div></div></div><hr class="fn-sep"><div id="afterEndDrag" class="function"><div><h3>afterEndDrag(<wbr>opt_dropTarget)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l547">code »</a></span></h3><p>Called after a drag operation has finished.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>opt_dropTarget<code>?<a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a>=</code><dd><p>Target for successful drop.</p></dl></div></div></div></div><hr class="fn-sep"><div id="createDragElement" class="function"><div><h3>createDragElement(<wbr>sourceEl)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l790">code »</a></span></h3><p>Creates an element for the item being dragged.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>sourceEl<code>Element</code><dd><p>Drag source element.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>Element</code><dd><p>The new drag element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="createDragElementInternal" class="function"><div><h3>createDragElementInternal(<wbr>sourceEl)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l858">code »</a></span></h3><p>Generates an element to follow the cursor during dragging, given a drag source element. The default behavior is simply to clone the source element, but this may be overridden in subclasses. This method is called by <code>createDragElement()</code> before the drag class is added.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>sourceEl<code>Element</code><dd><p>Drag source element.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code>Element</code><dd><p>The new drag element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="createDraggerFor" class="function"><div><h3>createDraggerFor(<wbr>sourceEl, el, event)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l478">code »</a></span></h3><p>Creates the Dragger for the drag element.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>sourceEl<code>Element</code><dd><p>Drag source element.</p><dt>el<code>Element</code><dd><p>the element created by createDragElement().</p><dt>event<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>Mouse down event for start of drag.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_fx_Dragger.html">goog.fx.Dragger</a></code><dd><p>The new Dragger.</p></dl></div></div></div></div><hr class="fn-sep"><div id="disposeDrag" class="function"><div><h3>disposeDrag()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l558">code »</a></span></h3><p>Called once a drag operation has finished. Removes event listeners and elements.</p></div></div><hr class="fn-sep"><div id="disposeInternal" class="function"><div><h3>disposeInternal()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l1149">code »</a></span></h3><p><b>Overrides: </b><a href="class_goog_events_EventTarget.html#disposeInternal">goog.events.EventTarget</a></p></div></div><hr class="fn-sep"><div id="disposeItem" class="function"><div><h3>disposeItem(<wbr>item)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l323">code »</a></span></h3><p>Called when removing an item. Removes event listeners and classes.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>item<code><a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a></code><dd><p>Item to dispose.</p></dl></div></div></div></div><hr class="fn-sep"><div id="endDrag" class="function"><div><h3>endDrag(<wbr>event)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l495">code »</a></span></h3><p>Event handler that&#39;s used to stop drag. Fires a drop event if over a valid target.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>event<code><a href="class_goog_fx_DragEvent.html">goog.fx.DragEvent</a></code><dd><p>Drag event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getDragElementPosition" class="function"><div><h3>getDragElementPosition(<wbr>el, dragEl, event)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l809">code »</a></span></h3><p>Returns the position for the drag element.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>el<code>Element</code><dd><p>Drag source element.</p><dt>dragEl<code>Element</code><dd><p>The dragged element created by createDragElement().</p><dt>event<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>Mouse down event for start of drag.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_math_Coordinate.html">goog.math.Coordinate</a></code><dd><p>The position for the drag element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getDragger" class="function"><div><h3>getDragger()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l829">code »</a></span></h3><p>Returns the dragger object.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_fx_Dragger.html">goog.fx.Dragger</a></code><dd><p>The dragger object used by this drag and drop  instance.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getElementBox" class="function"><div><h3>getElementBox(<wbr>item, element)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l900">code »</a></span></h3><p>Calculates the position and dimension of a draggable element.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>item<code><a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a></code><dd><p>Item that&#39;s being dragged.</p><dt>element<code>Element</code><dd><p>The element to calculate the box.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_math_Box.html">goog.math.Box</a></code><dd><p>Box describing the position and dimension  of element.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getEventPosition" class="function"><div><h3>getEventPosition(<wbr>event)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l1141">code »</a></span></h3><p>Get the position of a drag event.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>event<code><a href="class_goog_fx_DragEvent.html">goog.fx.DragEvent</a></code><dd><p>Drag event.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_math_Coordinate.html">goog.math.Coordinate</a></code><dd><p>Position of the event.</p></dl></div></div></div></div><hr class="fn-sep"><div id="getScrollPos" class="function"><div><h3>getScrollPos()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l1130">code »</a></span></h3><p>Gets the scroll distance as a coordinate object, using the window of the current drag element&#39;s dom.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_math_Coordinate.html">goog.math.Coordinate</a></code><dd><p>Object with scroll offsets &#39;x&#39; and &#39;y&#39;.</p></dl></div></div></div></div><hr class="fn-sep"><div id="init" class="function"><div><h3>init()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l282">code »</a></span></h3><p>Initialize drag and drop functionality for sources/targets already added. Sources/targets added after init has been called will initialize themselves one by one.</p></div></div><hr class="fn-sep"><div id="initItem" class="function"><div><h3>initItem(<wbr>item)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l300">code »</a></span></h3><p>Initializes a single item.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>item<code><a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a></code><dd><p>Item to initialize.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isInitialized" class="function"><div><h3>isInitialized()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l240">code »</a></span></h3><p>Whether the control has been initialized.</p><div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>True if it&#39;s been initialized.</p></dl></div></div></div></div><hr class="fn-sep"><div id="isInside" class="function"><div><h3>isInside(<wbr>x, y, box)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l1116">code »</a></span></h3><div class="tags"><span>deprecated</span></div><p>Checks whatever a given point is inside a given box.</p><p><b>Deprecated: </b>Use goog.math.Box.contains.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>x<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Cursor position on the x-axis.</p><dt>y<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Cursor position on the y-axis.</p><dt>box<code><a href="class_goog_math_Box.html">goog.math.Box</a></code><dd><p>Box to check position against.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></code><dd><p>Whether the given point is inside <code>box</code>.</p></dl></div></div></div></div><hr class="fn-sep"><div id="maybeStartDrag" class="function"><div><h3>maybeStartDrag(<wbr>event, item)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l359">code »</a></span></h3><p>Starts a drag event for an item if the mouse button stays pressed and the cursor moves a few pixels. Allows dragging of items without first having to register them with addItem.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>event<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>Mouse down event.</p><dt>item<code><a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a></code><dd><p>Item that&#39;s being dragged.</p></dl></div></div></div></div><hr class="fn-sep"><div id="recalculateDragTargets" class="function"><div><h3>recalculateDragTargets()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l428">code »</a></span></h3><p>Recalculates the geometry of this source&#39;s drag targets. Call this if the position or visibility of a drag target has changed during a drag, or if targets are added or removed.</p><p>TODO(user): this is an expensive operation; more efficient APIs may be necessary.</p></div></div><hr class="fn-sep"><div id="recalculateScrollableContainers" class="function"><div><h3>recalculateScrollableContainers()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l446">code »</a></span></h3><p>Recalculates the current scroll positions of scrollable containers and allocates targets. Call this if the position of a container changed or if targets are added or removed.</p></div></div><hr class="fn-sep"><div id="removeAllScrollableContainers" class="function"><div><h3>removeAllScrollableContainers()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l715">code »</a></span></h3><p>Removes all scrollable containers.</p></div></div><hr class="fn-sep"><div id="removeItems" class="function"><div><h3>removeItems()<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l343">code »</a></span></h3><p>Removes all items.</p></div></div><hr class="fn-sep"><div id="setDragClass" class="function"><div><h3>setDragClass(<wbr>className)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l208">code »</a></span></h3><p>Set class to add to source elements being dragged.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>className<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Class to be added. Must be a single, valid  classname.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setScrollTarget" class="function"><div><h3>setScrollTarget(<wbr>scrollTarget)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l272">code »</a></span></h3><p>Sets the SCROLL event target to make drag element follow scrolling.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>scrollTarget<code>EventTarget</code><dd><p>The element that dispatches SCROLL events.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setSourceClass" class="function"><div><h3>setSourceClass(<wbr>className)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l219">code »</a></span></h3><p>Set class to add to source elements.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>className<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Class to be added. Must be a single, valid  classname.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setSubtargetFunction" class="function"><div><h3>setSubtargetFunction(<wbr>f)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l779">code »</a></span></h3><p>Set a function that provides subtargets. A subtargeting function returns an arbitrary identifier for each subtarget of an element. DnD code will generate additional drag over / out events when switching from subtarget to subtarget. This is useful for instance if you are interested if you are on the top half or the bottom half of the element. The provided function will be given the DragDropItem, box, x, y box is the current window coordinates occupied by element x, y is the mouse position in window coordinates</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>f<code>Function</code><dd><p>The new subtarget function.</p></dl></div></div></div></div><hr class="fn-sep"><div id="setTargetClass" class="function"><div><h3>setTargetClass(<wbr>className)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l230">code »</a></span></h3><p>Set class to add to target elements.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>className<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>Class to be added. Must be a single, valid  classname.</p></dl></div></div></div></div><hr class="fn-sep"><div id="startDrag" class="function"><div><h3>startDrag(<wbr>event, item)<span class="codelink"><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l370">code »</a></span></h3><p>Event handler that&#39;s used to start drag.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>event<code><a href="class_goog_events_BrowserEvent.html">goog.events.BrowserEvent</a></code><dd><p>Mouse move event.</p><dt>item<code><a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a></code><dd><p>Item that&#39;s being dragged.</p></dl></div></div></div></div><h2>Instance Properties</h2><div id="items_" class="property"><dl><dt><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l69">items_</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="class_goog_fx_DragDropItem.html">goog.fx.DragDropItem</a>&gt;</code><dd><p>List of items that makes up the drag source or drop target.</p></dl></div><h2>Static Properties</h2><div id="AbstractDragDrop.initDragDistanceThreshold" class="property"><dl><dt><a href="source/closure/goog/fx/abstractdragdrop.js.src.html#l199">AbstractDragDrop.initDragDistanceThreshold</a><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code><dd><p>Constant for distance threshold, in pixels, an element has to be moved to initiate a drag operation.</p></dl></div></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>