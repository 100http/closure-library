<!DOCTYPE html><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="Content-Language" content="en"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Sanitizer</title><link href="dossier.css" rel="stylesheet" type="text/css"><header><div><form><div><input type="search" placeholder="Search"></div></form></div></header><main><article><div class="parentlink"><b>Namespace:</b> <a href="namespace_goog_labs_html.html">goog.labs.html</a></div><div class="codelink"><a href="source/closure/goog/labs/html/sanitizer.js.src.html#l41">View Source</a></div><h1>class Sanitizer</h1><p>A sanitizer that converts untrusted, messy HTML into more regular HTML that cannot abuse high-authority constructs like the ability to execute arbitrary JavaScript.</p><h2>Instance Methods</h2><div id="allowAttributes" class="function"><div><h3>allowAttributes(<wbr>elementNames, attrNames, opt_rewriteValue)<span class="codelink"><a href="source/closure/goog/labs/html/sanitizer.js.src.html#l194">code »</a></span></h3><p>Allows in the sanitized output <tt>&lt;<i>element</i> <i>attr</i>&#61;&#34;...&#34;&gt;</tt> when <i>element</i> is in <code>elementNames</code> and <i>attrNames</i> is in <code>attrNames</code>.</p><p>If specified, <code>opt_valueXform</code> is a function that takes the HTML-entity-decoded attribute value, and can choose to disallow the attribute by returning <code>null</code> or substitute a new value by returning a string with the new value.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>elementNames<code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>names (or name) on which the  attributes are allowed.</p>
<pre><code>Element names should be allowed via &lt;code&gt;allowElements(...)&lt;/code&gt; prior
to white-listing attributes.

The special element name &lt;code&gt;&amp;quot;*&amp;quot;&lt;/code&gt; has the same meaning as in CSS
selectors: it can be used to white-list attributes like &lt;code&gt;title&lt;/code&gt;
and &lt;code&gt;id&lt;/code&gt; which are widely available with element-agnostic
meanings.

It should not be used for attributes like &lt;code&gt;type&lt;/code&gt; whose meaning
differs based on the element on which it appears:
e.g. &lt;code&gt;&amp;lt;input type&#61;text&amp;gt;&lt;/code&gt; vs &lt;code&gt;&amp;lt;style type&#61;text/css&amp;gt;&lt;/code&gt;.
</code></pre><dt>attrNames<code>(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>&gt;|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code><dd><p>names (or name) of the attribute  that should be allowed.</p><dt>opt_rewriteValue<code>function(?(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="class_goog_html_SafeHtml.html">goog.html.SafeHtml</a>|<a href="class_goog_html_SafeStyle.html">goog.html.SafeStyle</a>|<a href="class_goog_html_SafeUrl.html">goog.html.SafeUrl</a>)): ?(<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>|<a href="class_goog_html_SafeHtml.html">goog.html.SafeHtml</a>|<a href="class_goog_html_SafeStyle.html">goog.html.SafeStyle</a>|<a href="class_goog_html_SafeUrl.html">goog.html.SafeUrl</a>)=</code><dd><p>A function  that receives the HTML-entity-decoded attribute value and can return  <code>null</code> to disallow the attribute entirely or the value for the  attribute as a string.  </p><p>  The default is the identity function (<code>function(x){return x}</code>),  and the value rewriter is composed with an attribute specific handler:  <table><tr><th>href, src</th><td>Requires that the value be an absolute URL with a protocol in  (http, https, mailto) or a protocol relative URL.    </td></tr></table></p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_labs_html_Sanitizer.html">goog.labs.html.Sanitizer</a></code><dd><p><code>this</code>.</p></dl></div></div></div></div><hr class="fn-sep"><div id="allowElements" class="function"><div><h3>allowElements(<wbr>var_args)<span class="codelink"><a href="source/closure/goog/labs/html/sanitizer.js.src.html#l131">code »</a></span></h3><p>Adds the element names to the white-list of elements that are allowed in the safe HTML output. </p><p> Allowing elements does not, by itself, allow any attributes on those elements.</p><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>var_args<code>...<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>element names that should be allowed in the  safe HTML output.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="class_goog_labs_html_Sanitizer.html">goog.labs.html.Sanitizer</a></code><dd><p><code>this</code>.</p></dl></div></div></div></div><hr class="fn-sep"><div id="sanitize" class="function"><div><h3>sanitize(<wbr>unsafeHtml)<span class="codelink"><a href="source/closure/goog/labs/html/sanitizer.js.src.html#l101">code »</a></span></h3><p>Yields a string of safe HTML that contains all and only the safe text-nodes and elements in the input.</p>
<p></p><p>For the purposes of this function, &#34;safe&#34; is defined thus: </p><ul><li>Contains only elements explicitly allowed via <code>this.allow*</code>.  </li><li>Contains only attributes explicitly allowed via <code>this.allow*</code>  and having had all relevant transformations applied.  </li><li>Contains an end tag for all and only non-void open tags.  </li><li>Tags nest per XHTML rules.  </li><li>Tags do not nest beyond a finite but fairly large level. </li></ul><div><div class="fn-details"><div><b>Parameters</b></div><dl><dt>unsafeHtml<code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A string of HTML which need not originate with  a trusted source.</p></dl></div><div class="fn-details"><div><b>Returns</b></div><dl><dt><code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></code><dd><p>A string of HTML that contains only tags and attributes  explicitly allowed by this sanitizer, and with end tags for all and only  non-void elements.</p></dl></div></div></div></div></article><nav><h3><a href="index.html">Overview</a></h3><div><input type="checkbox" id="nav-types" checked/><label for="nav-types"><h3><span class="selectable">Types</span></h3></label><div id="nav-types-view"></div></div></nav></main><div class="pre-footer"><div></div></div><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer><script src="types.js"></script><script src="dossier.js"></script>